<html>
<head>
	
	<title>Why MAC addresses do not need to be globally unique?</title>
	<meta name="keywords" content="information tech" />

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    
	   <link href="/css/main.css?v=3" rel="stylesheet" type="text/css" />
    
        
<script src="/js/util.js"></script>

        <script>
            if(isMobile()) {
                loadjscssfile('../css/mobile.css', 'css');
            } else {
                loadjscssfile('../css/desktop.css', 'css');
            }
        </script> 
    

    <link rel="alternate" type="application/atom+xml" href="/atom.xml" title="Atom feed">

    
	<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=3"/>
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-76SLJ1L5G2"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-76SLJ1L5G2');
</script>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-76SLJ1L5G2"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-76SLJ1L5G2');
    </script>
    <script data-ad-client="ca-pub-8355064206464637" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<meta name="generator" content="Hexo 5.4.0"></head>


<body>


<h2 class="title">Why MAC addresses do not need to be globally unique?</h2>
<!--
<div style="text-align:center;margin-top: -10px;">
<div class="article-category">
发表于2021年9月1日




 </div>
-->
</div>

<ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Why-MAC-addresses-do-not-need-to-be-globally-unique"><span class="toc-text">Why MAC addresses do not need to be globally unique?</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Modifying-addresses"><span class="toc-text">Modifying addresses</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#LAN-Communication"><span class="toc-text">LAN Communication</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Summary"><span class="toc-text">Summary</span></a></li></ol></li></ol>
<h1 id="Why-MAC-addresses-do-not-need-to-be-globally-unique"><a href="#Why-MAC-addresses-do-not-need-to-be-globally-unique" class="headerlink" title="Why MAC addresses do not need to be globally unique?"></a>Why MAC addresses do not need to be globally unique?</h1><p>MAC address (Media access control address) is a unique identifier assigned to the network interface controller (NIC), it will be used as a network address in the network segment1, all hosts with a network card have a separate MAC address, the address contains a total of 48 bits, occupying 6 bytes of space. It occupies 6 bytes of space and can represent 281,474,976,710,656 network devices. A normal MAC address is represented in the format shown below, with each byte using two hexadecimal digits.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">6e:77:0f:b8:8b:6b</span><br></pre></td></tr></table></figure>
<p>Because MAC addresses need to be unique, IEEE assigns address segments based on the manufacturer of the device. The first 24 bits of the 48-bit MAC address are the device manufacturer’s identifier, also known as the Organizationally Unique Identifier (OUI), and the next 24 bits are the serial number; if each device manufacturer can guarantee the uniqueness of all MAC addresses in the same namespace, then all MAC addresses in the world are guaranteed to be unique.</p>
<p>MAC addresses can be represented in two different formats, the 48-bit EUI-48, and the 64-bit EUI-643, and this article will use the EUI-48 format for MAC addresses, while EUI-64 is mainly used for the IPv6 protocol, which we will not discuss in this article. In general, the MAC address will use 24 bits to represent the serial number of the organization, but since many organizations will not produce so many devices, in practice three different sizes of address blocks will be divided4.</p>
<p>MA-L (MAC Address Block Large) - contains a 24-bit organizational identifier and a 24-bit address.<br>MA-M (MAC Address Block Medium) - contains a 28-bit organizational identifier and 20-bit address.<br>MA-S (MAC Address Block Small) - contains 36 bits of organizational identifiers and 12 bits of addresses.<br>These three different sizes of address block price are also completely different, MA-L registration price of 2995 U.S. dollars and MA-S registration price of 755 U.S. dollars, interested and needy readers can be in the IEEE official purchase 5, in the ideal case, all the addresses add up to a value of about 52 trillion dollars ~ ~, really define and master the standard can lie waiting for others to register to The standard is defined and mastered so that you can lie back and wait for others to register to make money~~.</p>
<p>The MAC address segment is distributed by the agency and guaranteed by the equipment vendor to ensure that the address is unique for all hardware in the world, but in practice, global uniqueness is not guaranteed and we do not need global uniqueness of address, mainly because of the following two reasons.</p>
<p>We can modify the MAC address of the NIC directly through the software on different operating systems.<br>It is only necessary to ensure that the MAC addresses in a LAN are not duplicated for the network to work properly.</p>
<h2 id="Modifying-addresses"><a href="#Modifying-addresses" class="headerlink" title="Modifying addresses"></a>Modifying addresses</h2><p>Modifying the MAC address of a network device is very simple, both on Linux and on macOS. In the Linux operating system, we can modify the MAC address on the device using the command <code>ifconfig</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ ifconfig eth0 | grep ether</span><br><span class="line">        ether 6e:77:0f:b8:8b:6b txqueuelen 1000 (Ethernet)</span><br><span class="line">$ ifconfig eth0 down</span><br><span class="line">$ ifconfig eth0 hw ether 6e:77:0f:b8:8b:6a</span><br><span class="line">$ ifconfig eth0 up</span><br><span class="line">$ ifconfig eth0 | grep ether</span><br><span class="line">        ether 6e:77:0f:b8:8b:6a txqueuelen 1000 (Ethernet)</span><br></pre></td></tr></table></figure>
<p>As long as we use the above command, we can easily modify the MAC address of the current NIC, but it is recommended not to use it on a remote Linux machine, it is better to test the relevant command on the local Linux, and it is also better to use the command to change the MAC address back after the modification test is finished; you can also use the ifconfig command to modify the MAC address on macOS, and the way to use it is almost identical to Linux. The way to change the MAC address on macOS is almost identical to Linux.</p>
<p>Because the MAC address is bound to the hardware, this way of modifying the MAC address is temporary, once the OS is rebooted, these changes will be undone by the system, and to make similar changes take effect permanently, you need to execute the corresponding command or modify the corresponding NIC configuration file when the system is rebooted6.</p>
<h2 id="LAN-Communication"><a href="#LAN-Communication" class="headerlink" title="LAN Communication"></a>LAN Communication</h2><p>All computers and end devices need to be connected to the LAN through network adapters. Each adapter has a unique link-layer address, also called LAN address or MAC address, and MAC addresses are designed with a flat structure, they do not change with the different networks they are on.</p>
<p>When a device’s network adapter wants to send a data frame to another adapter, it inserts the MAC address of the destination adapter into an Ethernet frame as shown below. Each Ethernet frame is similar to an IP datagram in that it contains the source and destination addresses, except that the address in the Ethernet frame is the MAC address, while the address in the IP datagram is the IP address.</p>
<p>Data transmission in a LAN is not routed and forwarded through IP addresses at the network layer, however, IP addresses are generally the only information known to the host sending the data, and to send data in a LAN, you still need to know their MAC addresses. When our device wants to send data to other devices, it will first get the MAC address corresponding to the destination IP address through ARP (Address Resolution Protocol) on the LAN.</p>
<p>The source host will send an ARP request to the current LAN, and the MAC address of the destination is FF-FF-FF-FF-FF-FF, which means the current request is a broadcast request, and all devices in the LAN will receive the request.<br>The hosts receiving the ARP request all check whether the destination IP and their IP addresses are the same.<br>If the IP addresses do not match, the host ignores the current ARP request.<br>If the IP address is the same, the host sends an ARP response directly to the source host.<br>After receiving the ARP response, the source host updates the local cache table and continues to send data to the destination host.</p>
<p>In a LAN, we usually use a hub or a switch to connect different network devices. Since all data frames are broadcasted to all hosts in the LAN connected by hubs, using the same MAC address usually does not cause much problem; however, switches will learn the MAC addresses of different devices in the LAN and forward the data frames to specific hosts, so if the LAN is composed of switches, it will affect the network communication.</p>
<p>Assuming two network devices A and B on the LAN with identical MAC addresses, i.e. 6e:77:0f:b8:8b:6b, when device A wants to send an Ethernet frame to device B, it encounters the following situation.</p>
<p>Device A sets both the source and destination addresses to 6e:77:0f:b8:8b:6b in the constructed Ethernet frame and sends the data to the switch.<br>The switch receives the data frame from device A, learns the MAC address of device A from the source address of the data frame, and inserts the record 6e:77:0f:b8:8b:6b -&gt; A into the local cache.<br>The switch finds that the destination address of the received data frame points to network device A, so it forwards the data back to A.<br>Because of the switch’s MAC address learning policy, we cannot use the same MAC address in the same LAN, but because MAC address is a concept in a link-layer network, network transmission across LANs needs to pass the network layer IP protocol, so there is no similar problem when using the same MAC address in different LANs.</p>
<h2 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h2><p>MAC address is an important concept in link layer networks, where Ethernet data frames will be forwarded through MAC address in LANs, and globally unique MAC address is a very ideal situation, however, in real network scenarios, we do not need to ensure such a strong restriction: the</p>
<p>MAC addresses can be modified by software, and third-party cottage vendors will not apply for a separate MAC address segment in IEEE, and they may also steal MAC addresses applied by other vendors.<br>Guaranteeing that MAC addresses are unique in a LAN will not cause network problems, and MAC addresses in different LANs can be the same.</p>


<!--<a href="https://www.gtygo.com/6.html#disqus_thread" class="article-comment-link">Comments</a>
<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = ''; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
-->
<div style="display:none">
<script src="http://s4.cnzz.com/stat.php?id=&web_id=" language="JavaScript"></script>script>
</div>






</body>
</html>